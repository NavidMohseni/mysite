<!DOCTYPE html>
<html lang="" xml:lang="">
<head>

  <meta charset="utf-8" />
  <meta http-equiv="X-UA-Compatible" content="IE=edge" />
  <title>6 Overall trends | Household Expenditure and Income Surveys of Iran</title>
  <meta name="description" content="The Household Expenditure and Income Surveys of Iran: Introduction and data cleaning" />
  <meta name="generator" content="bookdown 0.20 and GitBook 2.6.7" />

  <meta property="og:title" content="6 Overall trends | Household Expenditure and Income Surveys of Iran" />
  <meta property="og:type" content="book" />
  
  
  <meta property="og:description" content="The Household Expenditure and Income Surveys of Iran: Introduction and data cleaning" />
  <meta name="github-repo" content="rstudio/bookdown-demo" />

  <meta name="twitter:card" content="summary" />
  <meta name="twitter:title" content="6 Overall trends | Household Expenditure and Income Surveys of Iran" />
  
  <meta name="twitter:description" content="The Household Expenditure and Income Surveys of Iran: Introduction and data cleaning" />
  

<meta name="author" content="Mohammad Hoseini and Avenia Ghazarian" />


<meta name="date" content="2020-08-16" />

  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <meta name="apple-mobile-web-app-capable" content="yes" />
  <meta name="apple-mobile-web-app-status-bar-style" content="black" />
  
  
<link rel="prev" href="price-adjustment-and-appending.html"/>

<script src="libs/jquery-2.2.3/jquery.min.js"></script>
<link href="libs/gitbook-2.6.7/css/style.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-table.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-bookdown.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-highlight.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-search.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-fontsettings.css" rel="stylesheet" />
<link href="libs/gitbook-2.6.7/css/plugin-clipboard.css" rel="stylesheet" />











<style type="text/css">
a.sourceLine { display: inline-block; line-height: 1.25; }
a.sourceLine { pointer-events: none; color: inherit; text-decoration: inherit; }
a.sourceLine:empty { height: 1.2em; }
.sourceCode { overflow: visible; }
code.sourceCode { white-space: pre; position: relative; }
pre.sourceCode { margin: 0; }
@media screen {
div.sourceCode { overflow: auto; }
}
@media print {
code.sourceCode { white-space: pre-wrap; }
a.sourceLine { text-indent: -1em; padding-left: 1em; }
}
pre.numberSource a.sourceLine
  { position: relative; left: -4em; }
pre.numberSource a.sourceLine::before
  { content: attr(title);
    position: relative; left: -1em; text-align: right; vertical-align: baseline;
    border: none; pointer-events: all; display: inline-block;
    -webkit-touch-callout: none; -webkit-user-select: none;
    -khtml-user-select: none; -moz-user-select: none;
    -ms-user-select: none; user-select: none;
    padding: 0 4px; width: 4em;
    color: #aaaaaa;
  }
pre.numberSource { margin-left: 3em; border-left: 1px solid #aaaaaa;  padding-left: 4px; }
div.sourceCode
  {  }
@media screen {
a.sourceLine::before { text-decoration: underline; }
}
code span.al { color: #ff0000; font-weight: bold; } /* Alert */
code span.an { color: #60a0b0; font-weight: bold; font-style: italic; } /* Annotation */
code span.at { color: #7d9029; } /* Attribute */
code span.bn { color: #40a070; } /* BaseN */
code span.bu { } /* BuiltIn */
code span.cf { color: #007020; font-weight: bold; } /* ControlFlow */
code span.ch { color: #4070a0; } /* Char */
code span.cn { color: #880000; } /* Constant */
code span.co { color: #60a0b0; font-style: italic; } /* Comment */
code span.cv { color: #60a0b0; font-weight: bold; font-style: italic; } /* CommentVar */
code span.do { color: #ba2121; font-style: italic; } /* Documentation */
code span.dt { color: #902000; } /* DataType */
code span.dv { color: #40a070; } /* DecVal */
code span.er { color: #ff0000; font-weight: bold; } /* Error */
code span.ex { } /* Extension */
code span.fl { color: #40a070; } /* Float */
code span.fu { color: #06287e; } /* Function */
code span.im { } /* Import */
code span.in { color: #60a0b0; font-weight: bold; font-style: italic; } /* Information */
code span.kw { color: #007020; font-weight: bold; } /* Keyword */
code span.op { color: #666666; } /* Operator */
code span.ot { color: #007020; } /* Other */
code span.pp { color: #bc7a00; } /* Preprocessor */
code span.sc { color: #4070a0; } /* SpecialChar */
code span.ss { color: #bb6688; } /* SpecialString */
code span.st { color: #4070a0; } /* String */
code span.va { color: #19177c; } /* Variable */
code span.vs { color: #4070a0; } /* VerbatimString */
code span.wa { color: #60a0b0; font-weight: bold; font-style: italic; } /* Warning */
</style>

</head>

<body>



  <div class="book without-animation with-summary font-size-2 font-family-1" data-basepath=".">

    <div class="book-summary">
      <nav role="navigation">

<ul class="summary">
<li><a href="index.html#section"></a></li>
<li class="chapter" data-level="1" data-path="introduction.html"><a href="introduction.html"><i class="fa fa-check"></i><b>1</b> Introduction</a><ul>
<li class="chapter" data-level="1.1" data-path="introduction.html"><a href="introduction.html#sample-design"><i class="fa fa-check"></i><b>1.1</b> Sample design</a><ul>
<li class="chapter" data-level="1.1.1" data-path="introduction.html"><a href="introduction.html#rotating-panel-feature"><i class="fa fa-check"></i><b>1.1.1</b> Rotating panel feature</a></li>
</ul></li>
<li class="chapter" data-level="1.2" data-path="introduction.html"><a href="introduction.html#different-rounds"><i class="fa fa-check"></i><b>1.2</b> Different rounds</a></li>
</ul></li>
<li class="chapter" data-level="2" data-path="questionnaire-details.html"><a href="questionnaire-details.html"><i class="fa fa-check"></i><b>2</b> Questionnaire details</a><ul>
<li class="chapter" data-level="2.1" data-path="questionnaire-details.html"><a href="questionnaire-details.html#part-1---member-characteristics"><i class="fa fa-check"></i><b>2.1</b> Part 1 - Member Characteristics</a></li>
<li class="chapter" data-level="2.2" data-path="questionnaire-details.html"><a href="questionnaire-details.html#part-2---household-facilities"><i class="fa fa-check"></i><b>2.2</b> Part 2 - Household Facilities</a></li>
<li class="chapter" data-level="2.3" data-path="questionnaire-details.html"><a href="questionnaire-details.html#part-3---expenditure"><i class="fa fa-check"></i><b>2.3</b> Part 3 - Expenditure</a></li>
<li class="chapter" data-level="2.4" data-path="questionnaire-details.html"><a href="questionnaire-details.html#part-4-income"><i class="fa fa-check"></i><b>2.4</b> Part 4: Income</a></li>
</ul></li>
<li class="chapter" data-level="3" data-path="importing-raw-data.html"><a href="importing-raw-data.html"><i class="fa fa-check"></i><b>3</b> Importing raw data</a><ul>
<li class="chapter" data-level="3.1" data-path="importing-raw-data.html"><a href="importing-raw-data.html#importing-access-files-to-r"><i class="fa fa-check"></i><b>3.1</b> Importing access files to R</a></li>
<li class="chapter" data-level="3.2" data-path="importing-raw-data.html"><a href="importing-raw-data.html#importing-code-for-all-years"><i class="fa fa-check"></i><b>3.2</b> Importing code for all years</a></li>
</ul></li>
<li class="chapter" data-level="4" data-path="cleaning-data.html"><a href="cleaning-data.html"><i class="fa fa-check"></i><b>4</b> Cleaning data</a><ul>
<li class="chapter" data-level="4.1" data-path="cleaning-data.html"><a href="cleaning-data.html#cleaning-part-1-2"><i class="fa fa-check"></i><b>4.1</b> Cleaning Part 1 &amp; 2</a></li>
<li class="chapter" data-level="4.2" data-path="cleaning-data.html"><a href="cleaning-data.html#cleaning-part-3"><i class="fa fa-check"></i><b>4.2</b> Cleaning Part 3</a></li>
<li class="chapter" data-level="4.3" data-path="cleaning-data.html"><a href="cleaning-data.html#cleaning-part-4"><i class="fa fa-check"></i><b>4.3</b> Cleaning Part 4</a><ul>
<li class="chapter" data-level="4.3.1" data-path="cleaning-data.html"><a href="cleaning-data.html#non-monetary-income"><i class="fa fa-check"></i><b>4.3.1</b> Non-monetary income</a></li>
</ul></li>
<li class="chapter" data-level="4.4" data-path="cleaning-data.html"><a href="cleaning-data.html#building-individual-level-data"><i class="fa fa-check"></i><b>4.4</b> Building individual-level data</a></li>
<li class="chapter" data-level="4.5" data-path="cleaning-data.html"><a href="cleaning-data.html#building-household-level-data-summary-files"><i class="fa fa-check"></i><b>4.5</b> Building Household-level data (summary files)</a></li>
<li class="chapter" data-level="4.6" data-path="cleaning-data.html"><a href="cleaning-data.html#special-issues-for-different-years"><i class="fa fa-check"></i><b>4.6</b> Special issues for different years</a></li>
</ul></li>
<li class="chapter" data-level="5" data-path="price-adjustment-and-appending.html"><a href="price-adjustment-and-appending.html"><i class="fa fa-check"></i><b>5</b> Price adjustment and appending</a><ul>
<li class="chapter" data-level="5.1" data-path="price-adjustment-and-appending.html"><a href="price-adjustment-and-appending.html#price-adjustment"><i class="fa fa-check"></i><b>5.1</b> Price Adjustment</a></li>
<li class="chapter" data-level="5.2" data-path="price-adjustment-and-appending.html"><a href="price-adjustment-and-appending.html#merging-individual-level-data-overtime"><i class="fa fa-check"></i><b>5.2</b> Merging individual level data overtime</a></li>
<li class="chapter" data-level="5.3" data-path="price-adjustment-and-appending.html"><a href="price-adjustment-and-appending.html#merging-household-level-data-over-time"><i class="fa fa-check"></i><b>5.3</b> Merging household-level data over time</a></li>
</ul></li>
<li class="chapter" data-level="6" data-path="overall-trends.html"><a href="overall-trends.html"><i class="fa fa-check"></i><b>6</b> Overall trends</a><ul>
<li class="chapter" data-level="6.1" data-path="overall-trends.html"><a href="overall-trends.html#trends-in-expenditure-items"><i class="fa fa-check"></i><b>6.1</b> Trends in expenditure items</a></li>
<li class="chapter" data-level="6.2" data-path="overall-trends.html"><a href="overall-trends.html#trends-of-individual-level-data"><i class="fa fa-check"></i><b>6.2</b> Trends of individual level data</a></li>
<li class="chapter" data-level="6.3" data-path="overall-trends.html"><a href="overall-trends.html#trends-of-household-level-data-over-time"><i class="fa fa-check"></i><b>6.3</b> Trends of household-level data over time</a></li>
</ul></li>
</ul>

      </nav>
    </div>

    <div class="book-body">
      <div class="body-inner">
        <div class="book-header" role="navigation">
          <h1>
            <i class="fa fa-circle-o-notch fa-spin"></i><a href="./">Household Expenditure and Income Surveys of Iran</a>
          </h1>
        </div>

        <div class="page-wrapper" tabindex="-1" role="main">
          <div class="page-inner">

            <section class="normal" id="section-">
<div id="overall-trends" class="section level1">
<h1><span class="header-section-number">6</span> Overall trends</h1>
<style type="text/css">
pre {
  max-height: 500px;
  overflow-y: auto;
}

pre[class] {
  max-height: 500px;
}
</style>
<p>In this section we present some interesting trends that we observe from this data.</p>
<div id="trends-in-expenditure-items" class="section level2">
<h2><span class="header-section-number">6.1</span> Trends in expenditure items</h2>
<p>Results cannot be inferred for a population using a sample survey, before adjustment through a weighting system. Please note that in every result of this study we have applied the weights provided by the Statistical Center of Iran.<br />
Here is a piece of code showing how we applied weights in plotting the share of costs:</p>
<div class="sourceCode" id="cb1"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb1-1" title="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb1-2" title="2"></a>
<a class="sourceLine" id="cb1-3" title="3"></a>
<a class="sourceLine" id="cb1-4" title="4"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">79</span><span class="op">:</span><span class="dv">98</span>){ </a>
<a class="sourceLine" id="cb1-5" title="5">  </a>
<a class="sourceLine" id="cb1-6" title="6">  <span class="cf">if</span> (i <span class="op">&gt;=</span><span class="st"> </span><span class="dv">83</span>){</a>
<a class="sourceLine" id="cb1-7" title="7">    </a>
<a class="sourceLine" id="cb1-8" title="8">    <span class="kw">assign</span>(<span class="kw">paste0</span>(<span class="st">&quot;R&quot;</span>, i), <span class="kw">get</span>(<span class="kw">paste0</span>(<span class="st">&quot;R&quot;</span>, i, <span class="st">&quot;_Household&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-9" title="9"><span class="st">             </span><span class="kw">mutate</span>(<span class="dt">year =</span> <span class="kw">paste0</span>(<span class="dv">13</span>, i),</a>
<a class="sourceLine" id="cb1-10" title="10">                    <span class="dt">tcost=</span> <span class="kw">rowSums</span>(.[<span class="dv">2</span><span class="op">:</span><span class="dv">14</span>], <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb1-11" title="11">                    <span class="kw">across</span>(<span class="kw">c</span>(cost_food<span class="op">:</span>cost_investment),<span class="op">~</span>(.x<span class="op">/</span>tcost))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-12" title="12"><span class="st">             </span><span class="kw">select</span>(<span class="kw">c</span>(Address<span class="op">:</span>cost_investment), weight, year))</a>
<a class="sourceLine" id="cb1-13" title="13">    </a>
<a class="sourceLine" id="cb1-14" title="14">    </a>
<a class="sourceLine" id="cb1-15" title="15">  } <span class="cf">else</span> {</a>
<a class="sourceLine" id="cb1-16" title="16">    </a>
<a class="sourceLine" id="cb1-17" title="17">    <span class="kw">assign</span>(<span class="kw">paste0</span>(<span class="st">&quot;R&quot;</span>, i), <span class="kw">get</span>(<span class="kw">paste0</span>(<span class="st">&quot;R&quot;</span>, i, <span class="st">&quot;_Household&quot;</span>)) <span class="op">%&gt;%</span><span class="st"> </span></a>
<a class="sourceLine" id="cb1-18" title="18"><span class="st">             </span><span class="kw">mutate</span>(<span class="dt">year =</span> <span class="kw">paste0</span>(<span class="dv">13</span>, i),</a>
<a class="sourceLine" id="cb1-19" title="19">                    <span class="dt">tcost=</span> <span class="kw">rowSums</span>(.[<span class="dv">65</span><span class="op">:</span><span class="dv">74</span>], <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb1-20" title="20">                    <span class="kw">across</span>(<span class="kw">c</span>(cost_food<span class="op">:</span>cost_investment),<span class="op">~</span>(.x<span class="op">/</span>tcost))) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-21" title="21"><span class="st">             </span><span class="kw">select</span>(Address,<span class="kw">c</span>(cost_food<span class="op">:</span>cost_investment), weight, year))</a>
<a class="sourceLine" id="cb1-22" title="22">    </a>
<a class="sourceLine" id="cb1-23" title="23">  }</a>
<a class="sourceLine" id="cb1-24" title="24">  </a>
<a class="sourceLine" id="cb1-25" title="25">}</a>
<a class="sourceLine" id="cb1-26" title="26"></a>
<a class="sourceLine" id="cb1-27" title="27"></a>
<a class="sourceLine" id="cb1-28" title="28"><span class="co"># **** Weighting System 1 ****</span></a>
<a class="sourceLine" id="cb1-29" title="29"></a>
<a class="sourceLine" id="cb1-30" title="30">Rural_w &lt;-<span class="st"> </span>Rural<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-31" title="31"><span class="st">  </span><span class="kw">select</span>(<span class="kw">c</span>(cost_food<span class="op">:</span>cost_transportation_communication))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-32" title="32"><span class="st">  </span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-33" title="33"><span class="st">  </span><span class="kw">summarise_at</span>(<span class="kw">vars</span>(<span class="kw">starts_with</span>(<span class="st">&#39;cost&#39;</span>)), <span class="kw">funs</span>(<span class="kw">weighted.mean</span>(., weight, <span class="dt">na.rm=</span><span class="ot">TRUE</span>)))</a>
<a class="sourceLine" id="cb1-34" title="34"><span class="kw">names</span>(Rural_w)</a>
<a class="sourceLine" id="cb1-35" title="35"></a>
<a class="sourceLine" id="cb1-36" title="36"></a>
<a class="sourceLine" id="cb1-37" title="37">rural_w &lt;-Rural_w <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-38" title="38"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="op">-</span>year,</a>
<a class="sourceLine" id="cb1-39" title="39">               <span class="dt">names_to =</span> <span class="st">&quot;item&quot;</span>, <span class="dt">values_to=</span> <span class="st">&quot;value&quot;</span>)</a>
<a class="sourceLine" id="cb1-40" title="40">rural_w<span class="op">$</span>year &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(rural_w<span class="op">$</span>year)</a>
<a class="sourceLine" id="cb1-41" title="41"><span class="kw">ggplot</span>(<span class="dt">data =</span> rural_w, <span class="kw">aes</span>(<span class="dt">x=</span>year,<span class="dt">y=</span>value,<span class="dt">color=</span>item, <span class="dt">shape=</span> item)) <span class="op">+</span></a>
<a class="sourceLine" id="cb1-42" title="42"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()  </a>
<a class="sourceLine" id="cb1-43" title="43"></a>
<a class="sourceLine" id="cb1-44" title="44"><span class="co"># *** Weighting System 2 ****</span></a>
<a class="sourceLine" id="cb1-45" title="45"></a>
<a class="sourceLine" id="cb1-46" title="46">Rural_w2 &lt;-<span class="st"> </span>Rural <span class="op">%&gt;%</span><span class="kw">select</span>(cost_food<span class="op">:</span>cost_transportation_communication) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-47" title="47"><span class="st">  </span><span class="kw">group_by</span>(year)<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-48" title="48"><span class="st">  </span><span class="kw">summarise_at</span>(<span class="kw">vars</span>(<span class="kw">starts_with</span>(<span class="st">&#39;cost&#39;</span>)), <span class="kw">funs</span>(<span class="kw">weighted.sum</span>(., weight)))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-49" title="49"><span class="st">  </span><span class="kw">ungroup</span>()</a>
<a class="sourceLine" id="cb1-50" title="50"></a>
<a class="sourceLine" id="cb1-51" title="51">rural_w2 &lt;-<span class="st"> </span>Rural_w2<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-52" title="52"><span class="st">  </span><span class="kw">mutate</span>(<span class="dt">Total =</span> <span class="kw">rowSums</span>(Rural_w2[,<span class="dv">2</span><span class="op">:</span><span class="dv">16</span>], <span class="dt">na.rm =</span> <span class="ot">TRUE</span>),</a>
<a class="sourceLine" id="cb1-53" title="53">         <span class="kw">across</span>(<span class="kw">c</span>(cost_food<span class="op">:</span>cost_transportation_communication),<span class="op">~</span>(.x<span class="op">/</span>Total)))<span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-54" title="54"><span class="st">  </span><span class="kw">select</span>(<span class="kw">c</span>(year<span class="op">:</span>cost_transportation_communication)) <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb1-55" title="55"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="op">-</span>year,</a>
<a class="sourceLine" id="cb1-56" title="56">               <span class="dt">names_to =</span> <span class="st">&quot;item&quot;</span>, <span class="dt">values_to=</span> <span class="st">&quot;value&quot;</span>)</a>
<a class="sourceLine" id="cb1-57" title="57"></a>
<a class="sourceLine" id="cb1-58" title="58">rural_w2[rural_w2<span class="op">==</span><span class="dv">0</span>]&lt;-<span class="ot">NA</span></a>
<a class="sourceLine" id="cb1-59" title="59">rural_w2<span class="op">$</span>year &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(rural_w2<span class="op">$</span>year)</a>
<a class="sourceLine" id="cb1-60" title="60"><span class="kw">ggplot</span>(<span class="dt">data =</span> rural_w2, <span class="kw">aes</span>(<span class="dt">x=</span>year,<span class="dt">y=</span>value,<span class="dt">color=</span>item, <span class="dt">shape=</span> item)) <span class="op">+</span></a>
<a class="sourceLine" id="cb1-61" title="61"><span class="st">  </span><span class="kw">geom_point</span>() <span class="op">+</span><span class="st"> </span><span class="kw">geom_line</span>()  <span class="co">#+ facet_wrap(~item, scales = &quot;free&quot;)</span></a></code></pre></div>
<div class="figure">
<img src="./Plots/Rural_W1.png" alt="Rural Aggregate Share of Costs_Weghting System 1" />
<p class="caption">Rural Aggregate Share of Costs_Weghting System 1</p>
</div>
<p>Annual consumer price index (CPI) is used to adjust prices for inflation. The items in the questionnaire are matched to the ones present in the basket of CPI. We use the price index data of Central Bank of Iran which provides CPI for detailed items over time. <span style="color:red"> Here we need to present more details about CPI data like the number of categories and how we match the codes with them </span>
Total Index is used for cases where no appropriate match is found. In cases where an item of the questionnaire matches to more than one item in the CPI basket, a weighted average of the items of CPI is used.</p>
<div class="sourceCode" id="cb2"><pre class="sourceCode r"><code class="sourceCode r"><a class="sourceLine" id="cb2-1" title="1"><span class="kw">library</span>(tidyverse)</a>
<a class="sourceLine" id="cb2-2" title="2"><span class="kw">library</span>(readxl)</a>
<a class="sourceLine" id="cb2-3" title="3"></a>
<a class="sourceLine" id="cb2-4" title="4"><span class="kw">setwd</span>(<span class="st">&quot;C:/Users/SURFACE/Documents/New&quot;</span>)</a>
<a class="sourceLine" id="cb2-5" title="5"></a>
<a class="sourceLine" id="cb2-6" title="6"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">76</span><span class="op">:</span><span class="dv">98</span>) {</a>
<a class="sourceLine" id="cb2-7" title="7">  </a>
<a class="sourceLine" id="cb2-8" title="8">  <span class="kw">load</span>(<span class="kw">paste0</span>(i, <span class="st">&quot;New.Rdata&quot;</span>))</a>
<a class="sourceLine" id="cb2-9" title="9">   mylist[[i<span class="dv">-75</span>]]&lt;-<span class="st"> </span><span class="kw">paste0</span>(<span class="st">&quot;R&quot;</span>, i, <span class="st">&quot;P3&quot;</span>)</a>
<a class="sourceLine" id="cb2-10" title="10">}</a>
<a class="sourceLine" id="cb2-11" title="11"></a>
<a class="sourceLine" id="cb2-12" title="12"></a>
<a class="sourceLine" id="cb2-13" title="13"><span class="kw">rm</span>(<span class="dt">list=</span><span class="kw">ls</span>()[<span class="op">!</span><span class="kw">ls</span>() <span class="op">%in%</span><span class="st"> </span>mylist])</a>
<a class="sourceLine" id="cb2-14" title="14"></a>
<a class="sourceLine" id="cb2-15" title="15"></a>
<a class="sourceLine" id="cb2-16" title="16"><span class="cf">for</span>(i <span class="cf">in</span> <span class="dv">76</span><span class="op">:</span><span class="dv">98</span>){ </a>
<a class="sourceLine" id="cb2-17" title="17">  </a>
<a class="sourceLine" id="cb2-18" title="18"><span class="kw">assign</span>(<span class="kw">paste0</span>(<span class="st">&quot;R&quot;</span>, i), <span class="kw">get</span>(<span class="kw">paste0</span>(<span class="st">&quot;R&quot;</span>, i, <span class="st">&quot;P&quot;</span>, <span class="dv">3</span>)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>(<span class="dt">year =</span> <span class="kw">paste0</span>(<span class="st">&quot;13&quot;</span>, i)) <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">select</span>(Address, year, value, DYCOL00))</a>
<a class="sourceLine" id="cb2-19" title="19">  </a>
<a class="sourceLine" id="cb2-20" title="20">}</a>
<a class="sourceLine" id="cb2-21" title="21"></a>
<a class="sourceLine" id="cb2-22" title="22"></a>
<a class="sourceLine" id="cb2-23" title="23">globe_cpi &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;C:/HBS/globcpi.xlsx&quot;</span>)</a>
<a class="sourceLine" id="cb2-24" title="24">globe_cpi<span class="op">$</span>DYCOL00 &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(globe_cpi<span class="op">$</span>DYCOL00)</a>
<a class="sourceLine" id="cb2-25" title="25"></a>
<a class="sourceLine" id="cb2-26" title="26"><span class="co"># cpi_annual.xlsx has cpicodes in the values in cells are the annual CPI.</span></a>
<a class="sourceLine" id="cb2-27" title="27"></a>
<a class="sourceLine" id="cb2-28" title="28">CPI_annual &lt;-<span class="st"> </span><span class="kw">read_excel</span>(<span class="st">&quot;C:/HBS/cpi_annual.xlsx&quot;</span>)</a>
<a class="sourceLine" id="cb2-29" title="29"></a>
<a class="sourceLine" id="cb2-30" title="30">cpi_annual &lt;-<span class="st"> </span>CPI_annual <span class="op">%&gt;%</span></a>
<a class="sourceLine" id="cb2-31" title="31"><span class="st">  </span><span class="kw">pivot_longer</span>(<span class="op">-</span>cpicode, <span class="dt">names_to =</span> <span class="st">&quot;year&quot;</span>, <span class="dt">values_to =</span> <span class="st">&quot;CPI&quot;</span>)</a>
<a class="sourceLine" id="cb2-32" title="32">cpi_annual<span class="op">$</span>year &lt;-<span class="st"> </span><span class="kw">as.numeric</span>(cpi_annual<span class="op">$</span>year)</a>
<a class="sourceLine" id="cb2-33" title="33"></a>
<a class="sourceLine" id="cb2-34" title="34"></a>
<a class="sourceLine" id="cb2-35" title="35"><span class="co"># joining tables together </span></a>
<a class="sourceLine" id="cb2-36" title="36"></a>
<a class="sourceLine" id="cb2-37" title="37">R90_Hcost <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>( <span class="dt">bakhsh =</span> <span class="kw">as.numeric</span>(cost_food)<span class="op">/</span><span class="kw">as.numeric</span>(year))</a>
<a class="sourceLine" id="cb2-38" title="38"> </a>
<a class="sourceLine" id="cb2-39" title="39">Rural_cpi &lt;-<span class="st"> </span><span class="kw">left_join</span>(Rural_p3, globe_cpi, <span class="dt">by =</span> <span class="st">&quot;DYCOL00&quot;</span>)</a>
<a class="sourceLine" id="cb2-40" title="40">Rural_CPI &lt;-<span class="st"> </span><span class="kw">left_join</span>(Rural_cpi, cpi_annual, <span class="dt">by =</span> <span class="kw">c</span>(<span class="st">&quot;cpicode&quot;</span>, <span class="st">&quot;year&quot;</span>))</a>
<a class="sourceLine" id="cb2-41" title="41"></a>
<a class="sourceLine" id="cb2-42" title="42">Rural_CPI &lt;-<span class="st"> </span>Rural_CPI <span class="op">%&gt;%</span><span class="st"> </span><span class="kw">mutate</span>( <span class="dt">real_value =</span> value <span class="op">/</span><span class="st"> </span>CPI)</a></code></pre></div>
</div>
<div id="trends-of-individual-level-data" class="section level2">
<h2><span class="header-section-number">6.2</span> Trends of individual level data</h2>
<p><span style="color:red"> Income, wage by gender etc. </span></p>
</div>
<div id="trends-of-household-level-data-over-time" class="section level2">
<h2><span class="header-section-number">6.3</span> Trends of household-level data over time</h2>
<p><span style="color:red"> to be completed </span></p>

</div>
</div>
            </section>

          </div>
        </div>
      </div>
<a href="price-adjustment-and-appending.html" class="navigation navigation-prev navigation-unique" aria-label="Previous page"><i class="fa fa-angle-left"></i></a>

    </div>
  </div>
<script src="libs/gitbook-2.6.7/js/app.min.js"></script>
<script src="libs/gitbook-2.6.7/js/lunr.js"></script>
<script src="libs/gitbook-2.6.7/js/clipboard.min.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-search.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-sharing.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-fontsettings.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-bookdown.js"></script>
<script src="libs/gitbook-2.6.7/js/jquery.highlight.js"></script>
<script src="libs/gitbook-2.6.7/js/plugin-clipboard.js"></script>
<script>
gitbook.require(["gitbook"], function(gitbook) {
gitbook.start({
"sharing": {
"github": false,
"facebook": true,
"twitter": true,
"linkedin": false,
"weibo": false,
"instapaper": false,
"vk": false,
"all": ["facebook", "twitter", "linkedin", "weibo", "instapaper"]
},
"fontsettings": {
"theme": "white",
"family": "sans",
"size": 2
},
"edit": {
"link": null,
"text": null
},
"history": {
"link": null,
"text": null
},
"view": {
"link": null,
"text": null
},
"download": null,
"toc": {
"collapse": "subsection"
}
});
});
</script>

</body>

</html>
