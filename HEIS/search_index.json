[
["overall-trends.html", "6 Overall trends 6.1 Trends in expenditure items 6.2 Trends of individual level data 6.3 Trends of household-level data over time", " 6 Overall trends pre { max-height: 500px; overflow-y: auto; } pre[class] { max-height: 500px; } In this section we present some interesting trends that we observe from this data. 6.1 Trends in expenditure items Results cannot be inferred for a population using a sample survey, before adjustment through a weighting system. Please note that in every result of this study we have applied the weights provided by the Statistical Center of Iran. Here is a piece of code showing how we applied weights in plotting the share of costs: library(tidyverse) for(i in 79:98){ if (i &gt;= 83){ assign(paste0(&quot;R&quot;, i), get(paste0(&quot;R&quot;, i, &quot;_Household&quot;)) %&gt;% mutate(year = paste0(13, i), tcost= rowSums(.[2:14], na.rm = TRUE), across(c(cost_food:cost_investment),~(.x/tcost))) %&gt;% select(c(Address:cost_investment), weight, year)) } else { assign(paste0(&quot;R&quot;, i), get(paste0(&quot;R&quot;, i, &quot;_Household&quot;)) %&gt;% mutate(year = paste0(13, i), tcost= rowSums(.[65:74], na.rm = TRUE), across(c(cost_food:cost_investment),~(.x/tcost))) %&gt;% select(Address,c(cost_food:cost_investment), weight, year)) } } # **** Weighting System 1 **** Rural_w &lt;- Rural%&gt;% select(c(cost_food:cost_transportation_communication))%&gt;% group_by(year)%&gt;% summarise_at(vars(starts_with(&#39;cost&#39;)), funs(weighted.mean(., weight, na.rm=TRUE))) names(Rural_w) rural_w &lt;-Rural_w %&gt;% pivot_longer(-year, names_to = &quot;item&quot;, values_to= &quot;value&quot;) rural_w$year &lt;- as.numeric(rural_w$year) ggplot(data = rural_w, aes(x=year,y=value,color=item, shape= item)) + geom_point() + geom_line() # *** Weighting System 2 **** Rural_w2 &lt;- Rural %&gt;%select(cost_food:cost_transportation_communication) %&gt;% group_by(year)%&gt;% summarise_at(vars(starts_with(&#39;cost&#39;)), funs(weighted.sum(., weight)))%&gt;% ungroup() rural_w2 &lt;- Rural_w2%&gt;% mutate(Total = rowSums(Rural_w2[,2:16], na.rm = TRUE), across(c(cost_food:cost_transportation_communication),~(.x/Total)))%&gt;% select(c(year:cost_transportation_communication)) %&gt;% pivot_longer(-year, names_to = &quot;item&quot;, values_to= &quot;value&quot;) rural_w2[rural_w2==0]&lt;-NA rural_w2$year &lt;- as.numeric(rural_w2$year) ggplot(data = rural_w2, aes(x=year,y=value,color=item, shape= item)) + geom_point() + geom_line() #+ facet_wrap(~item, scales = &quot;free&quot;) Rural Aggregate Share of Costs_Weghting System 1 Annual consumer price index (CPI) is used to adjust prices for inflation. The items in the questionnaire are matched to the ones present in the basket of CPI. We use the price index data of Central Bank of Iran which provides CPI for detailed items over time. Here we need to present more details about CPI data like the number of categories and how we match the codes with them Total Index is used for cases where no appropriate match is found. In cases where an item of the questionnaire matches to more than one item in the CPI basket, a weighted average of the items of CPI is used. library(tidyverse) library(readxl) setwd(&quot;C:/Users/SURFACE/Documents/New&quot;) for(i in 76:98) { load(paste0(i, &quot;New.Rdata&quot;)) mylist[[i-75]]&lt;- paste0(&quot;R&quot;, i, &quot;P3&quot;) } rm(list=ls()[!ls() %in% mylist]) for(i in 76:98){ assign(paste0(&quot;R&quot;, i), get(paste0(&quot;R&quot;, i, &quot;P&quot;, 3)) %&gt;% mutate(year = paste0(&quot;13&quot;, i)) %&gt;% select(Address, year, value, DYCOL00)) } globe_cpi &lt;- read_excel(&quot;C:/HBS/globcpi.xlsx&quot;) globe_cpi$DYCOL00 &lt;- as.numeric(globe_cpi$DYCOL00) # cpi_annual.xlsx has cpicodes in the values in cells are the annual CPI. CPI_annual &lt;- read_excel(&quot;C:/HBS/cpi_annual.xlsx&quot;) cpi_annual &lt;- CPI_annual %&gt;% pivot_longer(-cpicode, names_to = &quot;year&quot;, values_to = &quot;CPI&quot;) cpi_annual$year &lt;- as.numeric(cpi_annual$year) # joining tables together R90_Hcost %&gt;% mutate( bakhsh = as.numeric(cost_food)/as.numeric(year)) Rural_cpi &lt;- left_join(Rural_p3, globe_cpi, by = &quot;DYCOL00&quot;) Rural_CPI &lt;- left_join(Rural_cpi, cpi_annual, by = c(&quot;cpicode&quot;, &quot;year&quot;)) Rural_CPI &lt;- Rural_CPI %&gt;% mutate( real_value = value / CPI) 6.2 Trends of individual level data Income, wage by gender etc. 6.3 Trends of household-level data over time to be completed "]
]
